<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      GDB-15.1
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL-NS Stylesheets Vsnapshot" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-12.2">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch <span class="phrase">(System
        V</span> Edition) - Version 12.2
      </h4>
      <h3>
        Chapter&nbsp;13.&nbsp;Programming
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="gc.html" title="GC-8.2.6">Prev</a>
          <p>
            GC-8.2.6
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="git.html" title="Git-2.46.0">Next</a>
          <p>
            Git-2.46.0
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapter&nbsp;13.&nbsp;Programming">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch    (System V Edition) - Version 12.2">Home</a>
        </li>
      </ul>
    </div>
    <h1 class="sect1">
      <a id="gdb" name="gdb"></a>GDB-15.1
    </h1>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="package" lang="en" xml:lang="en">
        <h2 class="sect2">
          Introduction to GDB
        </h2>
        <p>
          <span class="application">GDB</span>, the GNU Project debugger,
          allows you to see what is going on <span class=
          "quote">“<span class="quote">inside</span>”</span> another program
          while it executes -- or what another program was doing at the
          moment it crashed. Note that <span class="application">GDB</span>
          is most effective when tracing programs and libraries that were
          built with debugging symbols and not stripped.
        </p>
        <p>
          This package is known to build and work properly using an LFS 12.2
          platform.
        </p>
        <h3>
          Package Information
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Download (HTTP): <a class="ulink" href=
                "https://ftp.gnu.org/gnu/gdb/gdb-15.1.tar.xz">https://ftp.gnu.org/gnu/gdb/gdb-15.1.tar.xz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Download MD5 sum: 494e3beaac44e66367c3e443a4414529
              </p>
            </li>
            <li class="listitem">
              <p>
                Download size: 23 MB
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimated disk space required: 806 MB (add 1.0 GB for docs;
                add 720 MB for tests)
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimated build time: 0.9 SBU (add 0.4 SBU for docs; see
                below for tests; all using parallelism=8)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          GDB Dependencies
        </h3>
        <h4>
          Recommended Runtime Dependency
        </h4>
        <p class="recommended">
          <a class="xref" href="python-modules.html#six" title=
          "six-1.16.0">six-1.16.0</a> (Python 3 module, required at run-time
          to use GDB scripts from various LFS/BLFS packages with Python 3
          installed in LFS)
        </p>
        <h4>
          Optional
        </h4>
        <p class="optional">
          <a class="xref" href="doxygen.html" title=
          "Doxygen-1.12.0">Doxygen-1.12.0</a>, <a class="xref" href=
          "gcc.html" title="GCC-14.2.0">GCC-14.2.0</a> (ada, gfortran, and go
          are used for tests), <a class="xref" href="guile.html" title=
          "Guile-3.0.10">Guile-3.0.10</a>, <a class="xref" href="rust.html"
          title="Rustc-1.80.1">rustc-1.80.1</a> (used for some tests),
          <a class="xref" href="valgrind.html" title=
          "Valgrind-3.23.0">Valgrind-3.23.0</a>, and <a class="ulink" href=
          "https://sourceware.org/systemtap/">SystemTap</a> (run-time, used
          for tests)
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          Installation of GDB
        </h2>
        <p>
          Install <span class="application">GDB</span> by running the
          following commands:
        </p>
        <pre class="userinput"><kbd class="command">mkdir build &amp;&amp;
cd    build &amp;&amp;

../configure --prefix=/usr          \
             --with-system-readline \
             --with-python=/usr/bin/python3 &amp;&amp;
make</kbd></pre>
        <p>
          Optionally, to build the API documentation using <a class="xref"
          href="doxygen.html" title="Doxygen-1.12.0">Doxygen-1.12.0</a>, run:
        </p>
        <pre class="userinput"><kbd class=
        "command">make -C gdb/doc doxy</kbd></pre>
        <p>
          Running the tests is not recommended. The results vary a lot
          depending on the system architecture and what optional dependencies
          are installed and what version of gcc is being used. On one system
          tested, there were 140 unexpected failures (out of over 108,000
          tests) and on another system there were "only" 32 unexpected
          failures. The time to run the tests varies from approximately 6 SBU
          to over 15 SBU when using -j8. This depends on number of tests that
          time out as will as other factors.
        </p>
        <div class="admon tip">
          <img alt="[Tip]" src="../images/tip.png" />
          <h3>
            Tip
          </h3>
          <p>
            With a plain <span class="command"><strong>make
            check</strong></span>, there are many warning messages about a
            missing global configuration file. These can be avoided by
            running <span class="command"><strong>touch
            global.exp</strong></span> and prepending the <span class=
            "command"><strong>make check</strong></span> command with
            <span class=
            "command"><strong>DEJAGNU=$PWD/global.exp</strong></span>. In
            addition the tests can be speeded up considerably by using the
            <span class="command"><strong>make</strong></span> option
            "-j&lt;N&gt;" where &lt;N&gt; is the number of cores on your
            system.
          </p>
        </div>
        <p>
          To test the results anyway, issue:
        </p>
        <pre class="userinput"><kbd class=
        "command">pushd gdb/testsuite &amp;&amp;
make  site.exp      &amp;&amp;
echo  "set gdb_test_timeout 30" &gt;&gt; site.exp &amp;&amp;
make check 2&gt;1 | tee gdb-check.log
popd</kbd></pre>
        <p>
          See <span class="emphasis"><em>gdb/testsuite/README</em></span> and
          <a class="ulink" href=
          "https://sourceware.org/gdb/wiki/TestingGDB">TestingGDB</a>. There
          are many additional problems with the test suite:
        </p>
        <div class="itemizedlist">
          <ul>
            <li class="listitem">
              <p>
                Clean directories are needed if re-running the tests. For
                that reason, make a copy of the compiled source code
                directory before the tests in case you need to run the tests
                again.
              </p>
            </li>
            <li class="listitem">
              <p>
                Results depend on installed compilers.
              </p>
            </li>
            <li class="listitem">
              <p>
                On some AMD-based systems, over 200 additional tests may fail
                due to a difference in the threading implementation on those
                CPUs.
              </p>
            </li>
          </ul>
        </div>
        <p>
          Now, as the <code class="systemitem">root</code> user:
        </p>
        <pre class="root"><kbd class="command">make -C gdb install &amp;&amp;
make -C gdbserver install</kbd></pre>
        <p>
          If you have built the API documentation, it is now in gdb/doc/doxy.
          You can install it (as the <code class="systemitem">root</code>
          user):
        </p>
        <pre class="root"><kbd class=
        "command">install -d /usr/share/doc/gdb-15.1 &amp;&amp;
rm -rf gdb/doc/doxy/xml &amp;&amp;
cp -Rv gdb/doc/doxy /usr/share/doc/gdb-15.1</kbd></pre>
      </div>
      <div class="commands" lang="en" xml:lang="en">
        <h2 class="sect2">
          Command Explanations
        </h2>
        <p>
          <em class="parameter"><code>--with-system-readline</code></em>:
          This switch forces <span class="application">GDB</span> to use the
          copy of <span class="application">Readline</span> installed in LFS.
        </p>
        <p>
          <em class=
          "parameter"><code>--with-python=/usr/bin/python3</code></em>: This
          switch forces <span class="application">GDB</span> to use Python 3.
        </p>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          Contents
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed Programs:</strong>
              <span class="segbody">gcore, gdb, gdbserver, and
              gdb-add-index</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Library:</strong>
              <span class="segbody">libinproctrace.so</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Directories:</strong>
              <span class="segbody">/usr/{include,share}/gdb and
              /usr/share/doc/gdb-15.1</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Short Descriptions
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="gcore" name="gcore"></a><span class=
                    "term"><span class=
                    "command"><strong>gcore</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    generates a core dump of a running program
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="gdb-prog" name="gdb-prog"></a><span class=
                    "term"><span class=
                    "command"><strong>gdb</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the GNU Debugger
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="gdbserver" name="gdbserver"></a><span class=
                    "term"><span class=
                    "command"><strong>gdbserver</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a remote server for the GNU debugger (it allows
                    programs to be debugged from a different machine)
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="gdb-add-index" name=
                    "gdb-add-index"></a><span class="term"><span class=
                    "command"><strong>gdb-add-index</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    Allows adding index files to ELF binaries. This speeds up
                    <span class="command"><strong>gdb</strong></span> start
                    on large programs.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libinproctrace" name=
                    "libinproctrace"></a><span class="term"><code class=
                    "filename">libinproctrace.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    contains functions for the in-process tracing agent. The
                    agent allows for installing fast tracepoints, listing
                    static tracepoint markers, probing static tracepoints
                    markers, and starting trace monitoring.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="gc.html" title="GC-8.2.6">Prev</a>
          <p>
            GC-8.2.6
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="git.html" title="Git-2.46.0">Next</a>
          <p>
            Git-2.46.0
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapter&nbsp;13.&nbsp;Programming">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch    (System V Edition) - Version 12.2">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
