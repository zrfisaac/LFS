<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      GeoClue-2.7.1
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL-NS Stylesheets Vsnapshot" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-12.2">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch <span class="phrase">(System
        V</span> Edition) - Version 12.2
      </h4>
      <h3>
        Chapter&nbsp;17.&nbsp;Networking Libraries
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="curl.html" title="cURL-8.9.1">Prev</a>
          <p>
            cURL-8.9.1
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="glib-networking.html" title=
          "glib-networking-2.80.0">Next</a>
          <p>
            glib-networking-2.80.0
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="netlibs.html" title=
          "Chapter&nbsp;17.&nbsp;Networking Libraries">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch    (System V Edition) - Version 12.2">Home</a>
        </li>
      </ul>
    </div>
    <h1 class="sect1">
      <a id="geoclue2" name="geoclue2"></a>GeoClue-2.7.1
    </h1>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="package" lang="en" xml:lang="en">
        <h2 class="sect2">
          Introduction to GeoClue
        </h2>
        <p>
          <span class="application">GeoClue</span> is a modular
          geoinformation service built on top of the <span class=
          "application">D-Bus</span> messaging system. The goal of the
          <span class="application">GeoClue</span> project is to make
          creating location-aware applications as simple as possible.
        </p>
        <p>
          This package is known to build and work properly using an LFS 12.2
          platform.
        </p>
        <h3>
          Package Information
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Download (HTTP): <a class="ulink" href=
                "https://gitlab.freedesktop.org/geoclue/geoclue/-/archive/2.7.1/geoclue-2.7.1.tar.bz2">
                https://gitlab.freedesktop.org/geoclue/geoclue/-/archive/2.7.1/geoclue-2.7.1.tar.bz2</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Download MD5 sum: 08bacd3b45311ee6c20e4240be7bc348
              </p>
            </li>
            <li class="listitem">
              <p>
                Download size: 104 KB
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimated disk space required: 6.9 MB
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimated build time: 0.1 SBU
              </p>
            </li>
          </ul>
        </div>
        <h3>
          GeoClue Dependencies
        </h3>
        <h4>
          Required
        </h4>
        <p class="required">
          <a class="xref" href="../general/json-glib.html" title=
          "JSON-GLib-1.8.0">JSON-GLib-1.8.0</a> and <a class="xref" href=
          "libsoup3.html" title="libsoup-3.4.4">libsoup-3.4.4</a>
        </p>
        <h4>
          Recommended
        </h4>
        <p class="recommended">
          <a class="xref" href="avahi.html" title="Avahi-0.8">Avahi-0.8</a>,
          <a class="xref" href="../x/libnotify.html" title=
          "libnotify-0.8.3">libnotify-0.8.3</a>, <a class="xref" href=
          "../general/ModemManager.html" title=
          "ModemManager-1.18.12">ModemManager-1.18.12</a>, and <a class=
          "xref" href="../general/vala.html" title=
          "Vala-0.56.17">Vala-0.56.17</a>
        </p>
        <h4>
          Optional
        </h4>
        <p class="optional">
          <a class="xref" href="../general/gtk-doc.html" title=
          "GTK-Doc-1.34.0">GTK-Doc-1.34.0</a>
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          Installation of GeoClue
        </h2>
        <p>
          Install <span class="application">GeoClue</span> by running the
          following commands:
        </p>
        <pre class="userinput"><kbd class="command">mkdir build &amp;&amp;
cd    build &amp;&amp;

meson setup --prefix=/usr       \
            --buildtype=release \
            -D gtk-doc=false    \
            ..                  &amp;&amp;
ninja</kbd></pre>
        <p>
          This package does not come with a test suite.
        </p>
        <p>
          Now, as the <code class="systemitem">root</code> user:
        </p>
        <pre class="root"><kbd class="command">ninja install</kbd></pre>
      </div>
      <div class="commands" lang="en" xml:lang="en">
        <h2 class="sect2">
          Command Explanations
        </h2>
        <p>
          <em class="parameter"><code>--buildtype=release</code></em>:
          Specify a buildtype suitable for stable releases of the package, as
          the default may produce unoptimized binaries.
        </p>
        <p>
          <code class="option">-D 3g-source=false</code>: This switch
          disables the 3G backend. Use it if you have not installed the
          <span class="application">ModemManager</span> package.
        </p>
        <p>
          <code class="option">-D modem-gps-source=false</code>: This switch
          disables the modem GPS backend. Use it if you have not installed
          the <span class="application">ModemManager</span> package.
        </p>
        <p>
          <code class="option">-D cdma-source=false</code>: This switch
          disables the CDMA source backend. Use it if you have not installed
          the <span class="application">ModemManager</span> package.
        </p>
        <p>
          <code class="option">-D nmea-source=false</code>: This switch
          disables the NMEA source. Use it if you have not installed the
          <span class="application">Avahi</span> package.
        </p>
        <p>
          <code class="option">-D demo-agent=false</code>: This switch
          disables the demo. Use it if you have not installed the
          <span class="application">libnotify</span> package.
        </p>
      </div>
      <div class="configuration" lang="en" xml:lang="en">
        <h2 class="sect2">
          Configuring GeoClue
        </h2>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            <a id="geoclue2-config" name="geoclue2-config"></a>Config Files
          </h3>
          <p>
            <code class=
            "filename">/etc/geoclue/conf.d/90-lfs-google.conf</code>
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            Configuration Information
          </h3>
          <p>
            In March of 2024, Mozilla announced the shutdown of the Mozilla
            Location Service. Geoclue uses this service for determining a
            user's location when requested by other applications. The only
            supported alternative by upstream is to use Google's Geolocation
            Service.
          </p>
          <p>
            To use Google's Geolocation Service, an API key must be used, and
            a configuration file must be created. <span class=
            "bold"><strong>This API key is only intended for use with LFS.
            Please do not use this API key if you are building for another
            distro or distributing binary copies. If you need an API key, you
            can request one at <a class="ulink" href=
            "https://www.chromium.org/developers/how-tos/api-keys">https://www.chromium.org/developers/how-tos/api-keys</a>.</strong></span>
          </p>
          <p>
            Create the configuration needed for using Google's Geolocation
            Service as the <code class="systemitem">root</code> user:
          </p>
          <pre class="root"><kbd class=
          "command">cat &gt; /etc/geoclue/conf.d/90-lfs-google.conf &lt;&lt; "EOF"
<code class="literal"># Begin /etc/geoclue/conf.d/90-lfs-google.conf

# This configuration applies for the WiFi source.
[wifi]

# Set the URL to Google's Geolocation Service.
url=https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyDxKL42zsPjbke5O8_rPVpVrLrJ8aeE9rQ

# End /etc/geoclue/conf.d/90-lfs-google.conf</code>
EOF</kbd></pre>
          <p>
            If you do not wish to request your location from a Geolocation
            service, you can hardcode your location in <code class=
            "filename">/etc/geolocation</code> using the format described in
            <a class="ulink" href=
            "https://man.archlinux.org/man/geoclue">geoclue(5)</a>.
          </p>
        </div>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          Contents
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed Programs:</strong>
              <span class="segbody">None</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Libraries:</strong>
              <span class="segbody">libgeoclue-2.so</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Directories:</strong>
              <span class="segbody">/etc/geoclue,
              /usr/include/libgeoclue-2.0, /usr/libexec/geoclue-2.0, and
              /usr/share/gtk-doc/html/{geoclue,libgeoclue}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="curl.html" title="cURL-8.9.1">Prev</a>
          <p>
            cURL-8.9.1
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="glib-networking.html" title=
          "glib-networking-2.80.0">Next</a>
          <p>
            glib-networking-2.80.0
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="netlibs.html" title=
          "Chapter&nbsp;17.&nbsp;Networking Libraries">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch    (System V Edition) - Version 12.2">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
